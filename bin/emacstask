#!/bin/bash

if [[ $OSTYPE == "linux-gnu" ]]; then
    EA_PATH=${XDG_DATA_HOME:-$HOME/.local/share}/emacs_anywhere
else
    EA_PATH=$HOME/.emacs_anywhere
fi

ELISP=$( cat $EA_PATH/emacs_anywhere.el )

if [ -z "$EA_EDITOR" ]; then
    EA_EDITOR='emacsclient -a "" -c'
fi

$EA_EDITOR -e "(progn
                 (defconst ea-app-name $EA_APP_NAME)
                 (defconst ea-window-title $EA_WINDOW_TITLE)
                 (defconst ea-x $EA_X)
                 (defconst ea-y $EA_Y)
                 (defconst ea-width $EA_WIDTH)
                 (defconst ea-height $EA_HEIGHT)
                 $ELISP)"
